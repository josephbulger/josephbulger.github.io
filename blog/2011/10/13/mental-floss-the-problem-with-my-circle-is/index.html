
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Mental Floss: The problem with my Circle is... - Joseph Bulger</title>
	<meta name="author" content="Joseph Bulger">

	
	<meta name="description" content="Mental Floss: The Problem With My Circle Is... that I&rsquo;m exposing too many details to the user of my code. The developer has to know intimate &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Joseph Bulger" type="application/atom+xml">
	
	<link rel="canonical" href="http://josephbulger.com/blog/2011/10/13/mental-floss-the-problem-with-my-circle-is/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-47917400-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/5db37e04905df77ec0c90dc7faebadfc?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<hgroup>
  <h1><a href="/">Joseph Bulger</a></h1>
  
    <h2>a Dark Matter Developer</h2>
  
</hgroup>

<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
		
			<a class="twitter" href="http://twitter.com/josephbulger" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/josephbulger" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		
		
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Mental Floss: The Problem With My Circle Is...</h1>
	<div class="entry-content" itemprop="articleBody"><p>that I&rsquo;m exposing too many details to the user of my code. The developer has to know intimate details about how to set up both the Ellipse and the Circle in order to calculate their areas effectively. In one case, the Ellipse, the runner has to know to set the major and minor axes, while for the Circle, they have know to set the Radius.</p>

<!-- more -->


<p>The underlying problem here is simple, actually. The real issue stems from the fact that the Ellipse (and by proxy the Circle) was designed as a Hybrid object. As I&rsquo;ve said before, and <a href="http://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882">others before me</a>, Hybrid objects are evil. To fix this, we need to either make these classes Data Structures, or make them Objects. Since the whole point of the code is to calculate the area, I say we have to make them Objects.</p>

<p>To do that, I made the following changes to Ellipse:</p>

<div><script src='https://gist.github.com/1279017.js?file=GoodEllipse.cs'></script>
<noscript><pre><code>public class Ellipse
{
  protected virtual int MajorAxis { get; set; }
  protected virtual int MinorAxis { get; set; }
    
  public Ellipse(int majorAxis, int minorAxis)
  {
    MajorAxis = majorAxis;
    MinorAxis = minorAxis;
  }
  
  public virtual double CalculateArea()
  {
    return Math.Pi * MajorAxis * MinorAxis;
  }
}</code></pre></noscript></div>


<p>Notice how MajorAxis and MinorAxis can still be extended via a subclass if need be, but they are <strong>only</strong> accessible from sub classes now, not from the outside world. This removes the class&rsquo;s Data Structure flavor and make it&rsquo;s a pure Object. It also has a great side benefit. Now a user can only create an Ellipse by supplying the major and minor values when the Ellipse is created. This logically makes sense because an Ellipse can&rsquo;t exist without it&rsquo;s major and minor axes.</p>

<p>So how does this effect the Circle now? This is how I changed the Circle:</p>

<div><script src='https://gist.github.com/1279017.js?file=GoodCircle.cs'></script>
<noscript><pre><code>public class Circle: Ellipse
{
  public Circle(int radius)
  {
    MajorAxis = radius;
    MinorAxis = radius;
  }  
}</code></pre></noscript></div>


<p>A lot of code has been removed. It almost seems like I&rsquo;ve cheated somewhere, doesn&rsquo;t it? Well, now that Ellipse is acting as a pure Object, the only thing Circle needs to do is to explain why it&rsquo;s &ldquo;special&rdquo;. As we noted before, a Circle is special because it has a Radius. In other words, it&rsquo;s major and minor axes have the same length. So the Circle class simply explains that relationship, and you&rsquo;re done. The area calculation doesn&rsquo;t need to be modified because the real difference was showing how the radius is related to the major and minor axes.</p>

<p>Now the runner is forced to use the classes in a way that prevents them from being used in inappropriate ways:</p>

<div><script src='https://gist.github.com/1279017.js?file=GoodRunner.cs'></script>
<noscript><pre><code>public class Runner
{
  public void UsingEllipsesAndCircles()
  {
    var ellipse = new Ellipse(10, 5);    
    
    var areaOfEllipse = ellipse.CalculateArea();
    
    var circle = new Circle(4);
        
    var areaForCircle = circle.CalculateArea();    
  }
}</code></pre></noscript></div>



</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>


</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014 - Joseph Bulger -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





		</div>
	</div>
</body>
</html>
